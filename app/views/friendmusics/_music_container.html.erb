<% if params[:category_id] == nil %>
  <% @sources.reverse.each_slice(2) do |source| %>
    <div class="row">
      <% (0..1).each do |i| %>
        <% if source[i] %>
          <%= render partial: "friendmusics/music_box", locals: {source: source[i]} %>
        <% end %>
      <% end %>
    </div>
  <% end %>
<% else %>
  <% Categorization.where(:category_id => params[:category_id]).map(&:music).sort_by { |h| h[:id] }.map(&:source).reverse.each_slice(2) do |source| %>
    <div class="row">
      <% (0..1).each do |i| %>
        <% if source[i] %>
          <%= render partial: "friendmusics/music_box", locals: {source: source[i]} %>
        <% end %>
      <% end %>
    </div>
  <% end %>
<% end %>