<div class="col-xs-12 col-md-6">
  <div class="music-box">
    <div class="row">
      <div class="col-xs-4">
        <% if params[:category_id] == nil %>
          <%= link_to source do %>
            <%= image_tag source.picture.url(:medium), width: "100%", class: 'music-image' %>
          <% end %>
        <% else %>
          <%= link_to friend_category_friendmusic_path(@friend_id, params[:category_id], source.id) do %>
            <%= image_tag source.picture.url(:medium), width: "100%", class: 'music-image' %>
          <% end %>
        <% end %>
      </div>
      <div class="col-xs-8">
        <h3 class="music-title">
          <% if params[:category_id] == nil %>
            <%= link_to truncate(source.title, length: 50, separator: ' '), friend_friendmusic_path(@friend_id, source.id) %>
          <% else %>
            <%= link_to truncate(source.title, length: 50, separator: ' '), friend_category_friendmusic_path(@friend_id, params[:category_id], source.id) %>
          <% end %>
        </h3>

        <ul class="list-unstyle list-inline">
          <li>
            <h4>
              <%= source.time %>
            </h4>
          </li>

          <% music = Music.where('source_id' => source.id).first %>

          <li>
            <div id="categories_<%= music.id%>">
              <%= render partial: "friendmusics/categories", locals: {music: music} %>
            </div>
          </li>

        </ul>
      </div>
    </div>
  </div>
</div>